# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
icon: public/icon.png
micros:
  - name: app
    src: .
    engine: static
    serve: dist
    primary: true
    commands:
      - NODE_OPTIONS="--max-old-space-size=1024" npm run build
    dev: npm run dev
    public_routes:
      - "/shared/*"
      - "/assets/*"

  - name: backend
    src: ./backend
    path: /api
    engine: nodejs16
    dev: npm run dev
    public_routes:
      - "/public/*"
